# Production Environment Variables for KMRL Train Induction System
# Copy this file to .env.production and update with your actual values

# ================================
# APPLICATION SETTINGS
# ================================
NODE_ENV=production
API_VERSION=1.0.0
PORT=3001

# ================================
# DATABASE CONFIGURATION
# ================================
# PostgreSQL Connection
POSTGRES_HOST=kmrl-postgres-prod
POSTGRES_PORT=5432
POSTGRES_USER=kmrl_prod_user
POSTGRES_PASSWORD=CHANGE_THIS_SECURE_PASSWORD
POSTGRES_DB=kmrl_train_production
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}?sslmode=require

# Database Connection Pool
DB_CONNECTION_TIMEOUT=60000
DB_POOL_MIN=5
DB_POOL_MAX=20
DB_IDLE_TIMEOUT=10000

# ================================
# REDIS CONFIGURATION
# ================================
REDIS_HOST=kmrl-redis-prod
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/0
REDIS_CLUSTER_MODE=false
REDIS_TLS=true

# ================================
# SECURITY SETTINGS
# ================================
# JWT Configuration
JWT_SECRET=CHANGE_THIS_TO_VERY_LONG_RANDOM_STRING_AT_LEAST_256_CHARS
REFRESH_TOKEN_SECRET=CHANGE_THIS_TO_ANOTHER_VERY_LONG_RANDOM_STRING
JWT_EXPIRES_IN=24h
REFRESH_TOKEN_EXPIRES_IN=7d

# Encryption Keys
ENCRYPTION_KEY=CHANGE_THIS_32_CHAR_ENCRYPTION_KEY
ENCRYPTION_ALGORITHM=aes-256-gcm

# Session Configuration
SESSION_SECRET=CHANGE_THIS_SESSION_SECRET_KEY
SESSION_TIMEOUT=86400000

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000
AUTH_RATE_LIMIT_MAX=10
OPTIMIZATION_RATE_LIMIT_MAX=5

# CORS Settings
ALLOWED_ORIGINS=https://kmrl-dashboard.com,https://admin.kmrl-system.com
FRONTEND_URL=https://kmrl-dashboard.com

# ================================
# EXTERNAL SERVICES
# ================================
# AI/ML Service
AI_SERVICE_URL=http://kmrl-ai-service:8001
AI_SERVICE_API_KEY=CHANGE_THIS_AI_API_KEY
AI_SERVICE_TIMEOUT=30000

# WhatsApp Business API
WHATSAPP_API_URL=https://graph.facebook.com/v18.0
WHATSAPP_ACCESS_TOKEN=CHANGE_THIS_WHATSAPP_TOKEN
WHATSAPP_PHONE_NUMBER_ID=CHANGE_THIS_PHONE_NUMBER_ID
WHATSAPP_VERIFY_TOKEN=CHANGE_THIS_VERIFY_TOKEN

# Email Service (SendGrid/SES)
EMAIL_SERVICE_PROVIDER=sendgrid
SENDGRID_API_KEY=CHANGE_THIS_SENDGRID_KEY
FROM_EMAIL=noreply@kmrl-system.com
FROM_NAME=KMRL System

# SMS Service (Twilio)
TWILIO_ACCOUNT_SID=CHANGE_THIS_TWILIO_SID
TWILIO_AUTH_TOKEN=CHANGE_THIS_TWILIO_TOKEN
TWILIO_PHONE_NUMBER=+1234567890

# IBM Maximo Integration
MAXIMO_API_URL=https://your-maximo-instance.com/maximo/api
MAXIMO_USERNAME=maximo_api_user
MAXIMO_PASSWORD=CHANGE_THIS_MAXIMO_PASSWORD
MAXIMO_API_KEY=CHANGE_THIS_MAXIMO_API_KEY

# ================================
# MONITORING & LOGGING
# ================================
# Logging Configuration
LOG_LEVEL=info
LOG_FORMAT=json
LOG_MAX_SIZE=50MB
LOG_MAX_FILES=10
LOG_DATE_PATTERN=YYYY-MM-DD

# Monitoring Services
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
DATADOG_API_KEY=CHANGE_THIS_DATADOG_KEY
NEW_RELIC_LICENSE_KEY=CHANGE_THIS_NEW_RELIC_KEY
NEW_RELIC_APP_NAME=KMRL-Train-Induction-Production

# Health Check Intervals
HEALTH_CHECK_INTERVAL=30000
DATABASE_HEALTH_TIMEOUT=5000
CACHE_HEALTH_TIMEOUT=3000

# ================================
# FILE STORAGE
# ================================
# AWS S3 Configuration
AWS_REGION=ap-south-1
AWS_ACCESS_KEY_ID=CHANGE_THIS_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=CHANGE_THIS_AWS_SECRET_KEY
S3_BUCKET_NAME=kmrl-train-system-prod
S3_BUCKET_REGION=ap-south-1

# Local Storage (if not using cloud)
UPLOAD_PATH=/app/uploads
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=jpg,jpeg,png,pdf,csv,xlsx

# ================================
# PERFORMANCE & SCALING
# ================================
# Cluster Configuration
CLUSTER_WORKERS=4
CLUSTER_RELOAD_DELAY=1000

# Memory Management
NODE_OPTIONS=--max-old-space-size=2048
UV_THREADPOOL_SIZE=16

# Cache TTL Settings (seconds)
DEFAULT_CACHE_TTL=300
TRAINSET_CACHE_TTL=600
SCHEDULE_CACHE_TTL=1800
ANALYTICS_CACHE_TTL=900
OPTIMIZATION_CACHE_TTL=3600

# Request Timeouts
API_TIMEOUT=30000
DATABASE_TIMEOUT=10000
EXTERNAL_API_TIMEOUT=15000

# ================================
# FEATURE FLAGS
# ================================
ENABLE_WHATSAPP_NOTIFICATIONS=true
ENABLE_REAL_TIME_UPDATES=true
ENABLE_PREDICTIVE_MAINTENANCE=true
ENABLE_ADVANCED_ANALYTICS=true
ENABLE_WHAT_IF_SIMULATOR=true
ENABLE_AUDIT_LOGGING=true
ENABLE_PERFORMANCE_MONITORING=true

# Debug Features (set to false in production)
ENABLE_DEBUG_ROUTES=false
ENABLE_MOCK_DATA=false
ENABLE_DETAILED_ERRORS=false

# ================================
# BACKUP & DISASTER RECOVERY
# ================================
# Database Backup
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_TYPE=s3
BACKUP_S3_BUCKET=kmrl-backups-prod

# Redis Backup
REDIS_BACKUP_ENABLED=true
REDIS_BACKUP_SCHEDULE=0 3 * * *

# ================================
# SSL/TLS CONFIGURATION
# ================================
SSL_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/kmrl.crt
SSL_KEY_PATH=/etc/ssl/private/kmrl.key
SSL_CA_PATH=/etc/ssl/certs/ca-bundle.crt

# ================================
# NOTIFICATION SETTINGS
# ================================
# Alert Thresholds
ALERT_CPU_THRESHOLD=80
ALERT_MEMORY_THRESHOLD=85
ALERT_DISK_THRESHOLD=90
ALERT_ERROR_RATE_THRESHOLD=5

# Notification Channels
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
TEAMS_WEBHOOK_URL=https://outlook.office.com/webhook/YOUR/TEAMS/WEBHOOK

# ================================
# COMPLIANCE & AUDIT
# ================================
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=365
GDPR_COMPLIANCE_ENABLED=true
DATA_RETENTION_POLICY_DAYS=2555

# ================================
# DEVELOPMENT & TESTING
# ================================
# Only used in development/staging
ENABLE_SWAGGER_DOCS=false
ENABLE_GRAPHQL_PLAYGROUND=false
ENABLE_PROFILER=false

# Testing Database (separate from production)
TEST_DATABASE_URL=postgresql://test_user:test_pass@test-db:5432/kmrl_test

# ================================
# DEPLOYMENT INFO
# ================================
BUILD_VERSION=1.0.0
BUILD_TIMESTAMP=2024-01-15T00:00:00Z
GIT_COMMIT=abc123def456
DEPLOYMENT_ENV=production
DEPLOYMENT_REGION=ap-south-1

# ================================
# IMPORTANT SECURITY NOTES
# ================================
# 1. Change ALL default passwords and secret keys
# 2. Use strong, unique passwords (minimum 32 characters)
# 3. Enable SSL/TLS for all connections
# 4. Regularly rotate secrets and API keys
# 5. Use environment-specific configurations
# 6. Enable audit logging for compliance
# 7. Set up proper monitoring and alerting
# 8. Regular security updates and patches
# 9. Backup strategy and disaster recovery plan
# 10. Access control and principle of least privilege

# ================================
# PERFORMANCE TUNING NOTES
# ================================
# 1. Adjust database connection pool based on load
# 2. Configure Redis memory policies appropriately
# 3. Set proper cache TTL values for your use case
# 4. Monitor and adjust timeout values
# 5. Use CDN for static assets
# 6. Enable compression for API responses
# 7. Implement proper indexing strategy
# 8. Regular performance testing and optimization